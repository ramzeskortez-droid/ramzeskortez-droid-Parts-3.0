# Описание проекта: AutoParts Marketplace

## 1. Обзор
AutoParts Marketplace — это SPA (Single Page Application) для автоматизации B2B/B2C цепочки продажи автозапчастей. Система устраняет хаос в переписках мессенджеров, структурируя процесс от запроса клиента до утверждения коммерческого предложения (КП).

## 2. Техническая Архитектура
Проект построен по архитектуре **Serverless / BaaS (Backend as a Service)**, где роль бэкенда и базы данных выполняет экосистема Google.

### Frontend
*   **Core:** React 19, TypeScript.
*   **Build Tool:** Vite.
*   **Styling:** Tailwind CSS (utility-first), Lucide React (иконки).
*   **State Management:** React Hooks (`useState`, `useEffect`, `useMemo`).
*   **UX Pattern:** Optimistic UI (мгновенная реакция интерфейса до ответа сервера) + Toast Notifications.

### Backend & Database
*   **API:** Google Apps Script (GAS). Обрабатывает `GET` и `POST` запросы.
*   **Database:** Google Sheets.
    *   Используется "Гибридная модель хранения":
        *   **Мета-данные** (ID, Даты, Статусы) хранятся в ячейках для фильтрации и визуализации.
        *   **Сложные данные** (Список деталей, цены, характеристики авто) хранятся в **JSON** внутри одной ячейки (Колонка H). Это позволяет избегать жесткой схемы таблицы и легко масштабировать поля.
*   **Notifications:** Telegram Bot API (отправка уведомлений в группу менеджеров).

## 3. Ключевые Сущности (Terminology)

### 3.1. Order (Заказ / Ордер)
*   **Суть:** Запрос от клиента на поиск запчастей.
*   **Владелец:** Клиент.
*   **Родительская сущность:** Не имеет родителя.
*   **Ключевые поля:** `VIN`, `CarDetails` (Авто), `ClientName`, `Items` (Список требуемого).
*   **Отображение в БД:** Строка с типом `ORDER`.

### 3.2. Offer (Предложение / Оффер)
*   **Суть:** Ответ поставщика на конкретный Order с ценами и сроками.
*   **Владелец:** Поставщик (Seller).
*   **Родительская сущность:** Привязан к Order через `parentId`.
*   **Ключевые поля:** `SellerPrice`, `OfferedQuantity` (сколько реально есть), `RefImage` (фото).
*   **Отображение в БД:** Строка с типом `OFFER`, располагается под соответствующим Order.

### 3.3. Item (Позиция / Деталь)
*   **Суть:** Единица товара внутри Order или Offer.
*   **Структура:** Объект внутри массива JSON.
*   **Важно:** Item в Order — это "хотелка" (хочу 5 шт). Item в Offer — это "реальность" (есть 3 шт по 100 руб).

### 3.4. CP (Commercial Proposal / КП)
*   **Суть:** Состояние заказа, когда Администратор выбрал лучшие позиции из разных Офферов, утвердил финальные цены продажи и открыл доступ Клиенту.
*   **Признак:** Статус заказа `Processed = 'Y'` (или `visibleToClient = 'Y'`).

## 4. Ролевая Модель
1.  **Client (Клиент):** Создает `Order`, ждет статус `Processed`, видит только утвержденные позиции (`Leader`).
2.  **Seller (Поставщик):** Видит открытые `Order`, создает `Offer`. Не видит офферы конкурентов.
3.  **Admin (Менеджер):** Видит всё. Принимает решения (`Rank = LEADER`), редактирует цены (`AdminPrice`), формирует КП.