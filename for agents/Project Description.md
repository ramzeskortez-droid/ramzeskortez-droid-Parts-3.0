
# Описание проекта: AutoParts Marketplace

## 1. Обзор
AutoParts Marketplace — это SPA для автоматизации B2B/B2C цепочки продажи автозапчастей. Система связывает клиента, админа и поставщиков в едином информационном поле.

## 2. Система Авторизации
В проекте реализована **двухуровневая независимая авторизация**:
*   **Клиент:** Использует ключ `client_auth` в LocalStorage. Хранит объект `{name, phone}`. Имеет кнопки быстрого входа для демо-тестов (Клиент №1/№2).
*   **Поставщик:** Использует ключ `seller_token` в LocalStorage. Хранит название компании в верхнем регистре.
*   **Админ:** Доступ к панели осуществляется через вкладку, сессия не требует отдельного токена в текущей реализации (защищено на уровне URL приложения).

## 3. Дашборды Поставщика (Market Intelligence)
Система анализирует спрос в реальном времени на основе таблицы `MarketData`:
*   **Алгоритм парсинга:** Используется робастный метод `parseRuDate`, который извлекает дату из ячеек Google Sheets, очищая её от переносов строк и лишних символов.
*   **Временные окна:** Расчет "Сегодня", "Неделя" и "Месяц" происходит относительно системного времени пользователя, но с ограничением `endOfToday`, чтобы исключить ошибочные "будущие" даты из текущей статистики.
*   **Лидер Спроса:** Динамически вычисляемый бренд автомобиля, по которому создано больше всего заказов за весь период.

## 4. Техническая Архитектура
*   **Database:** Google Sheets. Колонка **H (JSON)** — единственный источник истины для данных заказа/предложения.
*   **Notifications:** Telegram Bot API уведомляет о каждом ключевом шаге (Новый заказ -> Новое предложение -> Формирование КП -> Подтверждение покупки).
