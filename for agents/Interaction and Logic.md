# –°–ª–æ–≤–∞—Ä—å –ª–æ–≥–∏–∫–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (Interaction Dictionary)

## 1. –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ –∏ –¥–µ–π—Å—Ç–≤–∏–π (UI Actions)

### 1.1 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ö–ª–∏–µ–Ω—Ç–∞
*   **[–í–∫–ª–∞–¥–∫–∏] –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
    *   **–í –æ–±—Ä–∞–±–æ—Ç–∫–µ:** –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–∞. 
    *   **–ê—Ä—Ö–∏–≤:** –°–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–∫—Ä—ã—Ç—ã–µ –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã.
*   **[–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞]:**
    *   **–í –û–ë–†–ê–ë–û–¢–ö–ï (–°–µ—Ä—ã–π):** –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω, –º–µ–Ω–µ–¥–∂–µ—Ä—ã –∏—â—É—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –∏–¥–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ—Ü–µ–Ω–∫–∏ –∞–¥–º–∏–Ω–æ–º.
    *   **–ì–û–¢–û–í–û (–ó–µ–ª–µ–Ω—ã–π):** –ê–¥–º–∏–Ω —É—Ç–≤–µ—Ä–¥–∏–ª –ö–ü (—Ñ–ª–∞–≥ `processed='Y'`) –∏ –≤—ã–±—Ä–∞–ª —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ "–õ–∏–¥–µ—Ä–∞". –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Ü–µ–Ω—ã.
*   **[–ö–Ω–æ–ø–∫–∞] "–î–µ–º–æ-–∑–∞–∫–∞–∑":**
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (VIN, –º–æ–¥–µ–ª—å, 2 –¥–µ—Ç–∞–ª–∏).
    *   *–¶–µ–ª—å:* –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞.
*   **[–ö–Ω–æ–ø–∫–∞] "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å":**
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –§–æ—Ä–º–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç `Order`, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `–û–¢–ö–†–´–¢`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å.
    *   *–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:* –°–æ–∑–¥–∞–µ—Ç—Å—è –ª–∏–¥ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑".
*   **[–ö–Ω–æ–ø–∫–∞] "–ì–æ—Ç–æ–≤ –∫—É–ø–∏—Ç—å":**
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –°–∞–º–æ–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –°—Ç–∞–≤–∏—Ç —Ñ–ª–∞–≥ `readyToBuy = 'Y'`.
    *   *–õ–æ–≥–∏–∫–∞:* –°–∫—Ä–∏–ø—Ç GAS –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –æ—Ñ—Ñ–µ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `–õ–ò–î–ï–†`, —Å—É–º–º–∏—Ä—É–µ—Ç `adminPrice` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π —á–µ–∫ –≤ Telegram.

### 1.2 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ü–æ—Å—Ç–∞–≤—â–∏–∫–∞
*   **[–ö–Ω–æ–ø–∫–∞] "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ":**
    *   *–õ–æ–≥–∏–∫–∞:* –ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –≤–≤–µ–¥–µ–Ω–∞, –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `OFFER` —Å `parentId = OrderID`.
    *   *–ê–Ω–∏–º–∞—Ü–∏—è:* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `vanishingIds` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞ —Å–∂–∏–º–∞–µ—Ç—Å—è –∏ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ "–ù–æ–≤—ã–µ", –ø–µ—Ä–µ—Ö–æ–¥—è –≤ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ".
*   **[–§–∏–ª—å—Ç—Ä] "–ú–∞—Ä–∫–∏":**
    *   *–ê–ª–≥–æ—Ä–∏—Ç–º:* –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ `car.model` –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∑–∞–∫–∞–∑–æ–≤, –±–µ—Ä–µ—Ç `split(' ')[0]`, —É–±–∏—Ä–∞–µ—Ç –¥—É–±–ª–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫—É –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ "—Å–≤–æ–∏" –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã.

### 1.3 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
*   **[–ö–Ω–æ–ø–∫–∞] "–í—ã–±—Ä–∞—Ç—å" (–õ–∏–¥–µ—Ä):**
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç `rank` –æ—Ñ—Ñ–µ—Ä–∞. –û–¥–Ω–æ–º–æ–º–µ–Ω—Ç–Ω–æ –ø–æ –æ–¥–Ω–æ–π –¥–µ—Ç–∞–ª–∏ —É –∑–∞–∫–∞–∑–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –ª–∏–¥–µ—Ä.
    *   *–õ–æ–≥–∏–∫–∞:* –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã –ø–æ —ç—Ç–æ–π –∂–µ –¥–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ `–†–ï–ó–ï–†–í`.
*   **[–ö–Ω–æ–ø–∫–∞] "–£—Ç–≤–µ—Ä–¥–∏—Ç—å –ö–ü":**
    *   *–î–µ–π—Å—Ç–≤–∏–µ:* –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç `processed` –≤ `Y`.
    *   *–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:* –ö–ª–∏–µ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–∏–¥–µ—Ç—å —Ü–µ–Ω—ã –≤ —Å–≤–æ–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å "–ü–æ–∏—Å–∫...".

## 2. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Telegram (Broadcasting)

### 2.1 –ü–æ–¥–ø–∏—Å–∫–∞ (Bot Auth)
*   **–ö–æ–º–∞–Ω–¥–∞ `/start`:** –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `chat_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `Subscribers`. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç, –æ–Ω –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è. –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç.

### 2.2 –¢–∏–ø—ã –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç 4 —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∏ –∑–∞–∫—É–ø—â–∏–∫–∞–º:

1.  **üî• –ù–û–í–´–ô –ó–ê–ö–ê–ó**
    *   *–¢—Ä–∏–≥–≥–µ—Ä:* –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∞–ª "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å" (action: `create`, type: `ORDER`).
    *   *–ö–æ–Ω—Ç–µ–Ω—Ç:* ID –∑–∞–∫–∞–∑–∞, –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞, VIN, —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–µ—Ç–∞–ª–µ–π.
    *   *–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:* –í–∫–ª—é—á–∞–µ—Ç –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ª–∏–¥ –≤ –ë–∏—Ç—Ä–∏–∫—Å24.

2.  **üí∞ –ù–û–í–û–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï (‚ÑñX)**
    *   *–¢—Ä–∏–≥–≥–µ—Ä:* –ü–æ—Å—Ç–∞–≤—â–∏–∫ –æ—Ç–ø—Ä–∞–≤–∏–ª —Ü–µ–Ω—É (action: `create`, type: `OFFER`).
    *   *–ö–æ–Ω—Ç–µ–Ω—Ç:* –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–∫–∞–∑–∞, ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–∫–∞–∑–∞, –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏—Ä–º—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

3.  **‚úÖ –ö–ü –°–§–û–†–ú–ò–†–û–í–ê–ù–û**
    *   *–¢—Ä–∏–≥–≥–µ—Ä:* –ê–¥–º–∏–Ω –Ω–∞–∂–∞–ª "–£—Ç–≤–µ—Ä–¥–∏—Ç—å –ö–ü" (action: `form_cp`).
    *   *–ö–æ–Ω—Ç–µ–Ω—Ç:* ID –∑–∞–∫–∞–∑–∞, –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞, –ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ.
    *   *–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:* –°–ø–∏—Å–æ–∫ —Ç–æ–ª—å–∫–æ —Ç–µ—Ö –ø–æ–∑–∏—Ü–∏–π, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –±—ã–ª –≤—ã–±—Ä–∞–Ω "–õ–ò–î–ï–†", —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.

4.  **üõç –ö–õ–ò–ï–ù–¢ –ì–û–¢–û–í –ö–£–ü–ò–¢–¨**
    *   *–¢—Ä–∏–≥–≥–µ—Ä:* –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∞–ª "–ì–æ—Ç–æ–≤ –∫—É–ø–∏—Ç—å" (action: `confirm_purchase`).
    *   *–ö–æ–Ω—Ç–µ–Ω—Ç:* –ü–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞.
    *   *–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:* –ë–æ—Ç –ø–∞—Ä—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ "–î–µ—Ç–∞–ª–∏/–¶–µ–Ω—ã" –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –ò–¢–û–ì–û** (–¶–µ–Ω–∞ x –ö–æ–ª-–≤–æ) –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º "–õ–∏–¥–µ—Ä–∞–º".

## 3. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫ (Dashboard Engine)

### 3.1 –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç (`parseRuDate`)
–ò–∑-–∑–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Google Sheets, –¥–∞—Ç—ã —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–æ —Å–∫—Ä—ã—Ç—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏ (`\n`). 
1.  –°–∫—Ä–∏–ø—Ç –æ—á–∏—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —á–µ—Ä–µ–∑ `.replace(/[\n\r]/g, ' ')`.
2.  –ü—Ä–∏–º–µ–Ω—è–µ—Ç Regex `(\d{2})\.(\d{2})\.(\d{4})` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –î–Ω—è, –ú–µ—Å—è—Ü–∞ –∏ –ì–æ–¥–∞.
3.  –°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç `Date` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

### 3.2 –†–∞—Å—á–µ—Ç –æ–∫–æ–Ω (Today/Week/Month)
*   –ë–µ—Ä–µ—Ç—Å—è `endOfToday` (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞, –≤—Ä–µ–º—è 23:59:59).
*   –ó–∞–∫–∞–∑—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ —É—Å–ª–æ–≤–∏—é `date <= endOfToday`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö.

## 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –ó–∞—â–∏—Ç–∞

### 4.1 –ë–∏—Ç—Ä–∏–∫—Å24 (CRM)
*   **–°–æ–±—ã—Ç–∏–µ:** –¢–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `ORDER`.
*   **–ú–µ—Ç–æ–¥—ã:** `crm.lead.add` (—Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞) –∏ `crm.lead.productrows.set` (–ø—Ä–∏–≤—è–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤).
*   **–¢–æ–≤–∞—Ä—ã:** –¶–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ `0`, —á—Ç–æ–±—ã –º–µ–Ω–µ–¥–∂–µ—Ä –≤ CRM –≤–∏–¥–µ–ª —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞, –Ω–æ –Ω–µ –ø—É—Ç–∞–ª—Å—è –≤ —Ü–µ–Ω–∞—Ö –∑–∞–∫—É–ø–∞/–ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ —ç—Ç–∞–ø–µ –æ—Ü–µ–Ω–∫–∏.

### 4.2 –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (Locks)
*   **Interaction Lock:** –ü–æ—Å–ª–µ –ª—é–±–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å–∏ UI –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–∞ 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–í—ã–±—Ä–∞—Ç—å", –∞ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É —Ñ–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ "–æ—Ç–∫–∞—Ç–∏–ª–æ" –≤—ã–±–æ—Ä –Ω–∞–∑–∞–¥, –ø–æ—Ç–æ–º—É —á—Ç–æ GAS –µ—â–µ –Ω–µ —É—Å–ø–µ–ª –æ–±–Ω–æ–≤–∏—Ç—å —è—á–µ–π–∫—É.